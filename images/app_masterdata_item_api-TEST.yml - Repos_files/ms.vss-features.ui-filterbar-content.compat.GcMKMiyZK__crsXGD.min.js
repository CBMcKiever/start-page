"use strict";define("VSSUI",["require","exports","react","VSS/Core/Util/Accessibility","VSS/Core/Util/String"],function(e,t,i,s,r){var n,o,l;n=t.ResourcesFilterBar={},Object.defineProperty(t,"__esModule",{value:!0}),t.ResourcesFilterBar.ClearAndDismissFilterBarLinkLabel="Clear and dismiss filters",t.ResourcesFilterBar.ClearFilterBarLinkLabel="Clear filters",t.ResourcesFilterBar.FilterPageLeftAriaLabel="See previous group of filters",t.ResourcesFilterBar.FilterPageRightAriaLabel="See next group of filters",t.ResourcesFilterBar.AnnonuceVisibleFilters="Showing filters {0} through {1}",t.ResourcesFilterBar.ApplyChangesFilterBarText="Apply",function(e){o=t.ComponentsFilterBarFilterBar={},Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function o(t){var i=e.call(this,t)||this;if(i._firstChildIsKeywordItem=!1,i._prevContainerWidth=0,i._onResize=function(){i._resizeTimeout||(i._resizeTimeout=setTimeout(function(){if(i._resizeTimeout=null,i._isMounted){var e=i._prevContainerWidth<i._filterBarElement.clientWidth,t=(!i.state.shouldHidePlaceholderLabels||!e)&&i.state.shouldHidePlaceholderLabels,s=(!i.state.shouldHaveMaxItemWidth||!e)&&i.state.shouldHaveMaxItemWidth;i.setState({filtersToShowStopIndex:o.RENDER_EVERYTHING,shouldHidePlaceholderLabels:t,shouldHaveMaxItemWidth:s}),i._prevContainerWidth=i._filterBarElement.clientWidth}},100))},i._onPageLeft=function(){i._hasMadeVisibleFilterAnnouncement=!1;var e=i._startingFilterIndices.pop()||0;i._hasPagedLeft=!0,i.setState({filtersToShowStartIndex:e,filtersToShowStopIndex:o.RENDER_EVERYTHING})},i._onPageRight=function(){i._hasMadeVisibleFilterAnnouncement=!1,i._startingFilterIndices.push(i.state.filtersToShowStartIndex),i._hasPagedRight=!0,i.setState({filtersToShowStartIndex:i.state.filtersToShowStopIndex,filtersToShowStopIndex:o.RENDER_EVERYTHING})},i._calculateFiltersToShowStopIndex=function(){for(var e=i._rightElement.clientWidth,t=i._firstChildIsKeywordItem?1:0,s=0;s<i._childrenContainerElements.length;s++){var r=i._childrenContainerElements[s];if((e+=r.clientWidth+parseFloat(window.getComputedStyle(r).marginRight))>i._filterBarElement.clientWidth){var n=i.state.filtersToShowStartIndex+(s-t);return n>i.state.filtersToShowStartIndex?n:i.state.filtersToShowStartIndex+1}}return i.state.filtersToShowStartIndex+i._childrenContainerElements.length-t},i._onFilterChanged=function(e){i.setState({hasChangesToApply:i.props.filter.hasChangesToApply(),hasChangesToReset:i.props.filter.hasChangesToReset(),filtersToShowStopIndex:o.RENDER_EVERYTHING,shouldHidePlaceholderLabels:!1})},i._onFilterApplied=function(e){i.setState({hasChangesToApply:i.props.filter.hasChangesToApply()})},i._onClearAndDismiss=function(){i.props.filter.reset(),i.props.onDismissClicked&&i.props.onDismissClicked()},i._onApplyChanges=function(){i.props.filter.applyChanges(),i.focus()},!t.filter)throw new Error("Cannot create a FilterBar without a filter prop.");return i._startingFilterIndices=[],i._hasMadeVisibleFilterAnnouncement=!1,i._isMounted=!1,i.state={hasChangesToReset:t.filter.hasChangesToReset(),hasChangesToApply:t.filter.hasChangesToApply(),filtersToShowStartIndex:0,filtersToShowStopIndex:o.RENDER_EVERYTHING,shouldHidePlaceholderLabels:!1,shouldHaveMaxItemWidth:!1},i}return __extends(o,e),o.prototype.focus=function(){this._filterItemRefs&&this._filterItemRefs.length>0&&this._filterItemRefs[0].focus()},o.prototype.forceUpdate=function(){e.prototype.forceUpdate.call(this),this._filterItemRefs&&this._filterItemRefs.forEach(function(e){return e.forceUpdate()})},o.prototype.componentDidMount=function(){this.props.filter&&this.props.filter.subscribe(this._onFilterChanged,t.UtilitiesFilter.FILTER_CHANGE_EVENT),this.props.filter&&this.props.filter.subscribe(this._onFilterApplied,t.UtilitiesFilter.FILTER_APPLIED_EVENT),window.addEventListener("resize",this._onResize);var e=this._calculateFiltersToShowStopIndex();e<i.Children.toArray(this.props.children).length-1?this.setState({shouldHidePlaceholderLabels:!0}):this.setState({filtersToShowStopIndex:e}),this._isMounted=!0,this.props.onMounted&&this.props.onMounted(this)},o.prototype.getChildKeysAsString=function(e){var t=e.children&&i.Children.map(e.children,function(e){if(null===e)return null;return void 0===e?"":e.props.filterItemKey})||[];return JSON.stringify(t)},o.prototype.componentWillReceiveProps=function(e){this.getChildKeysAsString(this.props)!==this.getChildKeysAsString(e)?this.setState({hasChangesToApply:e.filter.hasChangesToApply(),hasChangesToReset:e.filter.hasChangesToReset(),filtersToShowStartIndex:0,filtersToShowStopIndex:o.RENDER_EVERYTHING}):this.setState({hasChangesToApply:e.filter.hasChangesToApply(),hasChangesToReset:e.filter.hasChangesToReset()})},o.prototype.componentWillUnmount=function(){this.props.filter&&this.props.filter.unsubscribe(this._onFilterChanged,t.UtilitiesFilter.FILTER_CHANGE_EVENT),this.props.filter&&this.props.filter.unsubscribe(this._onFilterApplied,t.UtilitiesFilter.FILTER_APPLIED_EVENT),window.removeEventListener("resize",this._onResize),this._isMounted=!1},o.prototype.componentDidUpdate=function(){if(this.props.onRenderComplete&&this.props.onRenderComplete(),this._hasPagedLeft&&this.state.filtersToShowStopIndex>0&&(0==this.state.filtersToShowStartIndex&&this._nextButtonElem&&this._nextButtonElem.focus(),this._hasPagedLeft=!1),this.state.filtersToShowStopIndex<0){var e=this._calculateFiltersToShowStopIndex(),t=this._firstChildIsKeywordItem?1:0,o=e===i.Children.toArray(this.props.children).length-t;o||this.state.shouldHidePlaceholderLabels?o||this.state.shouldHaveMaxItemWidth?(this._hasPagedRight&&e===this.state.filtersToShowStartIndex+this._childrenContainerElements.length-t&&this._prevButtonElem&&this._prevButtonElem.focus(),this.setState({filtersToShowStopIndex:e}),this._hasPagedRight=!1):this.setState({shouldHaveMaxItemWidth:!0}):this.setState({shouldHidePlaceholderLabels:!0})}else this._hasMadeVisibleFilterAnnouncement||(s.announce(r.format(n.AnnonuceVisibleFilters,this.state.filtersToShowStartIndex+1,this.state.filtersToShowStopIndex),!0),this._hasMadeVisibleFilterAnnouncement=!0)},o.prototype.render=function(){var e=this,s=this.props,r=s.children,o=s.filter,l=s.className,a=s.onDismissClicked,h=this.state,d=h.hasChangesToApply,p=h.hasChangesToReset,c=h.filtersToShowStopIndex,f=h.filtersToShowStartIndex,u=h.shouldHaveMaxItemWidth,m=h.shouldHidePlaceholderLabels;this._filterItemRefs=[],this._childrenContainerElements=[];var _=!0;this._firstChildIsKeywordItem=!1;var S,C=i.Children.map(r,function(s){if(null===s)return null;var r="vss-FilterBar--item",n=s;_&&n.props.isTextItem?(e._firstChildIsKeywordItem=!0,r=t.Util.css(r,"vss-FilterBar--item-keyword-container")):u&&(r=t.Util.css(r,"max-width-small")),_=!1;var l=i.cloneElement(n,{filter:n.props.filter||o,ref:function(t){t&&e._filterItemRefs.push(t)},hideSelectedItemIcon:!0,showPlaceholderAsLabel:!m});return i.createElement("div",{className:r,ref:function(t){t&&e._childrenContainerElements.push(t)}},l)});this._firstChildIsKeywordItem&&(S=C.shift());var g=c<C.length,E=f>0;if(g||E){var I=c>0?c:C.length;C=C.slice(f,I)}var T=a?n.ClearAndDismissFilterBarLinkLabel:n.ClearFilterBarLinkLabel;return i.createElement(t.Surface.SurfaceContext.Consumer,null,function(s){return i.createElement("div",{className:t.Util.css(l,"vss-FilterBar",1===s.background&&"bolt-filterbar-white depth-8")},i.createElement("div",{className:t.Util.css("vss-FilterBar--list",!S&&"justify-right"),ref:function(t){e._filterBarElement=t}},S,C,i.createElement("div",{className:"vss-FilterBar--right-items",ref:function(t){e._rightElement=t}},(E||g)&&i.createElement("div",{className:"vss-FilterBar--page-button-container"},i.createElement(t.Button.Button,{className:"filter-bar-button  vss-FilterBar-page-button",ref:function(t){e._prevButtonElem=t},onClick:e._onPageLeft,disabled:!E,ariaLabel:n.FilterPageLeftAriaLabel,iconProps:{iconName:"ChevronLeft"}}),i.createElement(t.Button.Button,{className:"filter-bar-button vss-FilterBar-page-button",ref:function(t){e._nextButtonElem=t},onClick:e._onPageRight,disabled:!g,ariaLabel:n.FilterPageRightAriaLabel,iconProps:{iconName:"ChevronRight"}})),!e.props.hideClearAction&&i.createElement("div",{className:"vss-FilterBar--action vss-FilterBar--action-clear"},i.createElement(t.Button.Button,{ariaLabel:T,className:"filter-bar-button",disabled:!p&&!a,iconProps:{iconName:"Cancel"},onClick:e._onClearAndDismiss,subtle:!0,tooltipProps:{text:T}})),o.usesApplyMode()&&i.createElement("div",{className:"vss-FilterBar--action vss-FilterBar--action-apply"},i.createElement(t.Button.Button,{className:"filter-bar-button",disabled:!d,onClick:e._onApplyChanges,iconProps:{iconName:"CheckMark"}},n.ApplyChangesFilterBarText)))))})},o}(i.Component);l.RENDER_EVERYTHING=-1,t.ComponentsFilterBarFilterBar.FilterBar=l}(),function(e){l=t[e]={},Object.defineProperty(t,"__esModule",{value:!0}),function(i){for(var s in i)t[e].hasOwnProperty(s)||(t[e][s]=i[s])}(o)}("ComponentsFilterBarindex"),function(e){t[e]={},Object.defineProperty(t,"__esModule",{value:!0}),function(i){for(var s in i)t[e].hasOwnProperty(s)||(t[e][s]=i[s])}(l)}("FilterBar")},["Resources.FilterBar","Components/FilterBar/FilterBar","Components/FilterBar/index","FilterBar"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-features.ui-filterbar-content"}}));