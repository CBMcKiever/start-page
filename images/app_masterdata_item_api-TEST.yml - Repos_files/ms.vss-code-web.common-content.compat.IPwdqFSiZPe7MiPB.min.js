"use strict";define("VC/Common",["require","exports","VSS/Platform/Feature","VSS/Platform/Context","VSS/Platform/Location","VSS/Core/Util/String","react","VSS/Platform/FPS","VSS/Legacy/Legacy","VSS/Core/Observable","VSS/Platform/RestClientBase","VSS/Platform/Util/Serialization","Favorites/Picker/FavoritePickerProvider","VSSUI/Utilities/Date","VSSUI/Util","VSS/Platform/Layout","VSSUI/PickList","VSS/Features/Frame/CommandBar","VSS/Core/Util/Object","VSSUI/Spinner"],function(e,t,r,o,i,n,s,a,u,p,c,d,l,h,f,v,m,g,y,_){var R,I,q,w,b,C,T,V,P,j,S,k,x,N,D,F;R=t.Resources={},Object.defineProperty(t,"__esModule",{value:!0}),t.Resources.VersionDropdown_PivotBranches="Branches",t.Resources.VersionDropdown_PivotTags="Tags",t.Resources.VersionDropdown_PivotCommits="Commits",t.Resources.VersionDropdown_MineBranches="Mine",t.Resources.VersionDropdown_AllBranches="All",t.Resources.VersionDropdown_TagsNoItemsText="No tags in this repository",t.Resources.VersionDropdown_BranchesSearchTextPlaceholder="Filter branches",t.Resources.VersionDropdown_TagsSearchTextPlaceholder="Filter tags",t.Resources.VersionDropdown_CommitsSearchTextPlaceholder="Search commits",t.Resources.VersionDropdown_BranchesSearchNoResultsText="No branches matched '{0}'",t.Resources.VersionDropdown_TagsSearchNoResultsText="No tags matched '{0}'",t.Resources.VersionDropdown_CommitsSearchNoResultsText="No commits matched '{0}'",t.Resources.VersionDropdown_CommitsSearchMinimumCharactersError="Enter first 4 characters of a commit ID",t.Resources.VersionDropdown_CommitsSearchWrongCharactersError="Commit IDs must be hex digits (0-9 and a-f)",t.Resources.VersionDropdown_NewBranch="New branch",t.Resources.VersionDropdown_DefaultBadge="Default",t.Resources.ManageRepositories="Manage repositories",t.Resources.SearchRepositoriesWatermark="Filter repositories",t.Resources.ImportRepository="Import repository",t.Resources.NewRepository="New repository",t.Resources.NewPullRequest="New pull request",I=t.ContractsConstants={},Object.defineProperty(t,"__esModule",{value:!0}),(x=t.ContractsConstants.GitConstants||(t.ContractsConstants.GitConstants={})).GitSecurityNamespaceId="2e9eb7ed-3c0a-47d4-87c1-0ffdd275fd87",x.SecurableRoot="repoV2/",x.GitToolName="Git",t.ContractsConstants.VersionControlArea="VersionControl",function(e){t.ContractsEnumToString={},Object.defineProperty(t,"__esModule",{value:!0}),t.ContractsEnumToString.pullRequestStatusToString=function(e){switch(e){case 2:return"Abandoned";case 4:return"All";case 3:return"Completed";default:return"Active"}}}(),q=t.Helpers={},Object.defineProperty(t,"__esModule",{value:!0}),(F=t.Helpers.BranchName||(t.Helpers.BranchName={})).getHeadRelativeName=function(e){return e.substring(e.indexOf("/",e.indexOf("/")+1)+1)},F.getParentName=function(e){return e.substring(0,e.lastIndexOf("/"))},F.getShortName=function(e){return e.substring(e.lastIndexOf("/")+1)},N=t.Helpers.FeatureFlags||(t.Helpers.FeatureFlags={}),D="WebAccess.RepositoryOverview.Enable",N.isRepositoryOverviewHubEnabled=function(e){return r.isFeatureFlagEnabled(e,D,!1)},function(e){var s;t.Navigation={},Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Branches="ms.vss-code-web.branches-route",e.Changeset="ms.vss-code-web.changeset-route",e.Commit="ms.vss-code-web.commit-route",e.Commits="ms.vss-code-web.commits-route",e.Shelveset="ms.vss-code-web.shelveset-route",e.TfvcFiles="ms.vss-code-web.files-route-tfvc",e.GitFiles="ms.vss-code-web.files-route-git",e.Pushes="ms.vss-code-web.pushes-route",e.Tags="ms.vss-code-web.tags-route",e.PullRequests="ms.vss-code-web.pull-request-list-route",e.PullRequest="ms.vss-code-web.pull-request-review-route",e.MyPullRequests="ms.vss-code-web.my-pullrequests-me-page-route",e.GitOverview="ms.vss-code-web.repository-overview-git-route",e.TfvcOverview="ms.vss-code-web.repository-overview-tfvc-route"}(s=t.Navigation.RouteIds||(t.Navigation.RouteIds={}));var a={"ms.vss-code-web.git-repository-overview":s.GitOverview,"ms.vss-code-web.files-hub-git":s.GitFiles,"ms.vss-code-web.branches-hub":s.Branches,"ms.vss-code-web.tags-hub":s.Tags,"ms.vss-code-web.pushes-hub":s.Pushes,"ms.vss-code-web.commits-hub":s.Commits,"ms.vss-code-web.pull-request-hub":s.PullRequests},u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getData=function(){return this.pageContext.getService("IVssContributionService").getData("ms.vss-code-web.navigation-data-provider")},t.prototype.getTfvcCommitUrl=function(e,t,r){var o={};this._addDefaultRoutes(o,t,r);var n="";return e.startsWith("C")?(n=s.Changeset,o.parameters=encodeURIComponent(e.substring(1))):(n=s.Shelveset,o.ss=e),i.routeUrl(this.pageContext,n,o)},t.prototype.getGitCommitUrl=function(e,t,r,o){var n={};return this._addDefaultRoutes(n,r,o),t&&(n["vc.GitRepositoryName"]=t),n.parameters=encodeURIComponent(e),i.routeUrl(this.pageContext,s.Commit,n)},t.prototype.getRepositoryUrl=function(e,t,r,o,n){if(!o)if(e){var u=this.pageContext.getService("IVssNavigationService").getDisplayedNavigation()[3];o=a[u]||s.GitFiles}else o=s.TfvcFiles;var p={};return this._addDefaultRoutes(p,t,r),e&&(p["vc.GitRepositoryName"]=e),n&&(p=Object.assign({},n,p)),i.routeUrl(this.pageContext,o,p)},t.prototype.getPullRequestUrl=function(e,t,r){var o={};return this._addDefaultRoutes(o,r,null),t&&(o["vc.GitRepositoryName"]=t),o.parameters=e.toString(),i.routeUrl(this.pageContext,s.PullRequest,o)},t.prototype.getRefUrl=function(e,t,r,o){var n=s.GitFiles;t||(n=s.TfvcFiles);var a={};this._addDefaultRoutes(a,r,o),t&&(a["vc.GitRepositoryName"]=t);return 0===e.indexOf("refs/heads/")&&(a.version="GB"+e.substring("refs/heads/".length)),i.routeUrl(this.pageContext,n,a)},t.prototype.getMyPullRequestsUrl=function(){return i.routeUrl(this.pageContext,s.MyPullRequests)},t.prototype._addDefaultRoutes=function(e,t,o){if(!t||!o){var i=this.pageContext.getService("ITfsPageService"),s=i.getData(),a=s&&s.project&&s.project.name;void 0===t&&a&&(t=a);var u=r.isFeatureEnabled(this.pageContext,"ms.vss-tfs-web.vertical-navigation",!1)?null:i.getHorizontalNavigationTeamData(),p=t&&a&&n.equals(t,a,!0);void 0===o&&u&&p&&(o=u.name)}t&&(e.project=t),o&&(e.team=o)},t}(o.VssService);o.Services.add("IVCNavigationService",{serviceFactory:u})}(),function(e){t.CreateMenuProvider={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.apply(this,arguments)||this;return t.menuItems=[],t.createRepository=function(){t.pageContext.getService("IVssLayoutManager").renderCallout(function(e){return s.createElement(u.LegacyComponent,{modules:["VersionControl/Scripts/Components/HeaderComponents/HeaderComponents"],wrappedType:"newRepositoryDialog",onClose:function(){e()},isOverviewHubEnabled:q.FeatureFlags.isRepositoryOverviewHubEnabled(t.pageContext)},null)})},t}return __extends(t,e),t.prototype._serviceStart=function(t){var r=this;e.prototype._serviceStart.call(this,t);var o=this.pageContext.getService("IVCNavigationService").getData();if(o){var n=this.pageContext.getService("ITfsPageService").getData();if(n&&n.project){var s={};s.project=n.project.name,o.defaultGitRepoName&&(o.defaultGitRepoName!==n.project.name&&(s["vc.GitRepositoryName"]=o.defaultGitRepoName),this.menuItems.push({groupKey:"vc-actions",href:i.routeUrl(this.pageContext,"ms.vss-code-web.pull-request-create-route",s),iconProps:{iconName:"BranchPullRequest"},id:"vcNewPr",onActivate:function(e,t){return a.onClickFPS(r.pageContext,e.href,!0,t)},rank:100,text:R.NewPullRequest})),this.menuItems.push({groupKey:"vc-actions",id:"vcNewRepo",onActivate:this.createRepository,rank:100,text:R.NewRepository})}}},t.prototype.getMenuItems=function(e){return"ms.vss-tfs-web.vertical-header-create-menu"===e?this.menuItems:null},t}(o.VssService);o.Services.add("code-create-menu-provider",{serviceFactory:r})}(),function(e){t.FluxAction={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._listeners=[]}return e.prototype.invoke=function(t){if(e.s_executing)throw new Error("Cannot invoke an action from inside another action.");e.s_executing=!0;try{this._listeners.forEach(function(e){e(t)})}finally{e.s_executing=!1}},e.prototype.addListener=function(e,t){var r=t?e.bind(t):e;return this._listeners.push(r),r},e.prototype.removeListener=function(e){var t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)},e}();r.s_executing=!1,t.FluxAction.Action=r}(),function(e){t.FluxStore={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.observable=new p.Observable}return e.prototype.subscribe=function(e){this.observable.subscribe(e,void 0)},e.prototype.unsubscribe=function(e){this.observable.unsubscribe(e,void 0)},e.prototype._emitChanged=function(){this.observable.notify(void 0,"emitChanged")},e}();t.FluxStore.Store=r}(),function(e){t[e]={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.createAnnotatedTag=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/annotatedTags/{objectId}",routeValues:{project:t,repositoryId:r},body:e})]})})},t.prototype.getAnnotatedTag=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/annotatedTags/{objectId}",routeValues:{project:e,repositoryId:t,objectId:r}})]})})},t.prototype.getBlob=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={download:o,fileName:i,resolveLfs:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Blobs/{sha1}",routeValues:{project:r,repositoryId:e,sha1:t},queryParams:s})]})})},t.prototype.getBlobContent=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={download:o,fileName:i,resolveLfs:n},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/octet-stream",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Blobs/{sha1}",routeValues:{project:r,repositoryId:e,sha1:t},queryParams:s})]})})},t.prototype.getBlobsZip=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={filename:o},[2,this.beginRequest({apiVersion:"5.0",method:"POST",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Blobs/{sha1}",routeValues:{project:r,repositoryId:t},queryParams:i,body:e})]})})},t.prototype.getBlobZip=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={download:o,fileName:i,resolveLfs:n},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Blobs/{sha1}",routeValues:{project:r,repositoryId:e,sha1:t},queryParams:s})]})})},t.prototype.getBranch=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={name:t,baseVersionDescriptor:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/stats/branches",routeValues:{project:r,repositoryId:e},queryParams:i})]})})},t.prototype.getBranches=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={baseVersionDescriptor:r},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/stats/branches",routeValues:{project:t,repositoryId:e},queryParams:o})]})})},t.prototype.getBranchStatsBatch=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/stats/branches",routeValues:{project:r,repositoryId:t},body:e})]})})},t.prototype.getChanges=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={top:o,skip:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/commits/{commitId}/Changes",routeValues:{project:r,commitId:e,repositoryId:t},queryParams:n})]})})},t.prototype.getCherryPickRelationships=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/cherryPickRelationships/{commitId}",routeValues:{project:r,repositoryNameOrId:e,commitId:t},queryParams:i})]})})},t.prototype.createCherryPick=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/cherryPicks/{cherryPickId}",routeValues:{project:t,repositoryId:r},body:e})]})})},t.prototype.getCherryPick=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/cherryPicks/{cherryPickId}",routeValues:{project:e,cherryPickId:t,repositoryId:r}})]})})},t.prototype.getCherryPickForRefName=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={refName:r},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/cherryPicks/{cherryPickId}",routeValues:{project:e,repositoryId:t},queryParams:o})]})})},t.prototype.getCommitDiffs=function(e,t,r,o,i,n,s){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(u){return a={diffCommonCommit:r,$top:o,$skip:i,baseVersionDescriptor:n,targetVersionDescriptor:s},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/diffs/commits",routeValues:{project:t,repositoryId:e},queryParams:a})]})})},t.prototype.getCommit=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={changeCount:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Commits/{commitId}",routeValues:{project:r,commitId:e,repositoryId:t},queryParams:i})]})})},t.prototype.getCommits=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={searchCriteria:t,$skip:o,$top:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Commits/{commitId}",routeValues:{project:r,repositoryId:e},queryParams:n})]})})},t.prototype.getPushCommits=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={pushId:t,top:o,skip:i,includeLinks:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Commits/{commitId}",routeValues:{project:r,repositoryId:e},queryParams:s})]})})},t.prototype.getCommitsBatch=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={$skip:o,$top:i,includeStatuses:n},[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/CommitsBatch",routeValues:{project:r,repositoryId:t},queryParams:s,body:e})]})})},t.prototype.getDeletedRepositories=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/DeletedRepositories",routeValues:{project:e}})]})})},t.prototype.getFileDiffs=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/FileDiffs",routeValues:{project:t,repositoryId:r},body:e})]})})},t.prototype.getForks=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/forks/{collectionId}",routeValues:{project:r,repositoryNameOrId:e,collectionId:t},queryParams:i})]})})},t.prototype.createForkSyncRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/forkSyncRequests/{forkSyncOperationId}",routeValues:{project:r,repositoryNameOrId:t},queryParams:i,body:e})]})})},t.prototype.getForkSyncRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/forkSyncRequests/{forkSyncOperationId}",routeValues:{project:r,repositoryNameOrId:e,forkSyncOperationId:t},queryParams:i})]})})},t.prototype.getForkSyncRequests=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeAbandoned:r,includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/forkSyncRequests/{forkSyncOperationId}",routeValues:{project:t,repositoryNameOrId:e},queryParams:i})]})})},t.prototype.createImportRequest=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/importRequests/{importRequestId}",routeValues:{project:t,repositoryId:r},body:e})]})})},t.prototype.getImportRequest=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/importRequests/{importRequestId}",routeValues:{project:e,repositoryId:t,importRequestId:r}})]})})},t.prototype.queryImportRequests=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={includeAbandoned:r},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/importRequests/{importRequestId}",routeValues:{project:e,repositoryId:t},queryParams:o})]})})},t.prototype.updateImportRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/importRequests/{importRequestId}",routeValues:{project:t,repositoryId:r,importRequestId:o},body:e})]})})},t.prototype.getItem=function(e,t,r,o,i,n,s,a,u,p,c){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(l){return d={path:t,scopePath:o,recursionLevel:i,includeContentMetadata:n,latestProcessedChange:s,download:a,versionDescriptor:u,includeContent:p,resolveLfs:c},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Items/{*path}",routeValues:{project:r,repositoryId:e},queryParams:d})]})})},t.prototype.getItemContent=function(e,t,r,o,i,n,s,a,u,p,c){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(l){return d={path:t,scopePath:o,recursionLevel:i,includeContentMetadata:n,latestProcessedChange:s,download:a,versionDescriptor:u,includeContent:p,resolveLfs:c},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/octet-stream",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Items/{*path}",routeValues:{project:r,repositoryId:e},queryParams:d})]})})},t.prototype.getItems=function(e,t,r,o,i,n,s,a,u){return __awaiter(this,void 0,void 0,function(){var p;return __generator(this,function(c){return p={scopePath:r,recursionLevel:o,includeContentMetadata:i,latestProcessedChange:n,download:s,includeLinks:a,versionDescriptor:u},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Items/{*path}",routeValues:{project:t,repositoryId:e},queryParams:p})]})})},t.prototype.getItemText=function(e,t,r,o,i,n,s,a,u,p,c){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(l){return d={path:t,scopePath:o,recursionLevel:i,includeContentMetadata:n,latestProcessedChange:s,download:a,versionDescriptor:u,includeContent:p,resolveLfs:c},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"text/plain",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Items/{*path}",routeValues:{project:r,repositoryId:e},queryParams:d})]})})},t.prototype.getItemZip=function(e,t,r,o,i,n,s,a,u,p,c){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(l){return d={path:t,scopePath:o,recursionLevel:i,includeContentMetadata:n,latestProcessedChange:s,download:a,versionDescriptor:u,includeContent:p,resolveLfs:c},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Items/{*path}",routeValues:{project:r,repositoryId:e},queryParams:d})]})})},t.prototype.getItemsBatch=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/ItemsBatch",routeValues:{project:r,repositoryId:t},body:e})]})})},t.prototype.getMergeBases=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={otherCommitId:r,otherCollectionId:i,otherRepositoryId:n},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/commits/{commitId}/mergeBases",routeValues:{project:o,repositoryNameOrId:e,commitId:t},queryParams:s})]})})},t.prototype.createMergeRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/merges/{mergeOperationId}",routeValues:{project:t,repositoryNameOrId:r},queryParams:i,body:e})]})})},t.prototype.getMergeRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryNameOrId}/merges/{mergeOperationId}",routeValues:{project:e,repositoryNameOrId:t,mergeOperationId:r},queryParams:i})]})})},t.prototype.getPolicyConfigurations=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s,a=this;return __generator(this,function(u){return s={repositoryId:t,refName:r,policyType:o,$top:i,continuationToken:n},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/policy/configurations",routeValues:{project:e},queryParams:s,returnRawResponse:!0}).then(function(e){return __awaiter(a,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return[4,e.text().then(d.deserializeVssJsonObject)];case 1:return t=r.sent(),[2,{policyConfigurations:t,continuationToken:e.headers.get("x-ms-continuationtoken")}]}})})})]})})},t.prototype.createAttachment=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/attachments/{fileName}",routeValues:{project:i,fileName:t,repositoryId:r,pullRequestId:o},customHeaders:{"Content-Type":"application/octet-stream"},body:e,isRawData:!0})]})})},t.prototype.deleteAttachment=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/attachments/{fileName}",routeValues:{project:o,fileName:e,repositoryId:t,pullRequestId:r}})]})})},t.prototype.getAttachmentContent=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",httpResponseType:"application/octet-stream",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/attachments/{fileName}",routeValues:{project:o,fileName:e,repositoryId:t,pullRequestId:r}})]})})},t.prototype.getAttachments=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/attachments/{fileName}",routeValues:{project:r,repositoryId:e,pullRequestId:t}})]})})},t.prototype.getAttachmentZip=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/attachments/{fileName}",routeValues:{project:o,fileName:e,repositoryId:t,pullRequestId:r}})]})})},t.prototype.createLike=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}/likes",routeValues:{project:i,repositoryId:e,pullRequestId:t,threadId:r,commentId:o}})]})})},t.prototype.deleteLike=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}/likes",routeValues:{project:i,repositoryId:e,pullRequestId:t,threadId:r,commentId:o}})]})})},t.prototype.getLikes=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}/likes",routeValues:{project:i,repositoryId:e,pullRequestId:t,threadId:r,commentId:o}})]})})},t.prototype.getPullRequestIterationCommits=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={top:i,skip:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/commits",routeValues:{project:o,repositoryId:e,pullRequestId:t,iterationId:r},queryParams:s})]})})},t.prototype.getPullRequestCommits=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/commits",routeValues:{project:r,repositoryId:e,pullRequestId:t}})]})})},t.prototype.getPullRequestConflict=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,conflictId:r}})]})})},t.prototype.getPullRequestConflicts=function(e,t,r,o,i,n,s,a){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(p){return u={$skip:o,$top:i,includeObsolete:n,excludeResolved:s,onlyResolved:a},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",routeValues:{project:r,repositoryId:e,pullRequestId:t},queryParams:u})]})})},t.prototype.updatePullRequestConflict=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",routeValues:{project:i,repositoryId:t,pullRequestId:r,conflictId:o},body:e})]})})},t.prototype.updatePullRequestConflicts=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/conflicts/{conflictId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.getPullRequestIterationChanges=function(e,t,r,o,i,n,s){return __awaiter(this,void 0,void 0,function(){var a;return __generator(this,function(u){return a={$top:i,$skip:n,$compareTo:s},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/changes",routeValues:{project:o,repositoryId:e,pullRequestId:t,iterationId:r},queryParams:a})]})})},t.prototype.getPullRequestIteration=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,iterationId:r}})]})})},t.prototype.getPullRequestIterations=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeCommits:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}",routeValues:{project:r,repositoryId:e,pullRequestId:t},queryParams:i})]})})},t.prototype.createPullRequestIterationStatus=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",routeValues:{project:i,repositoryId:t,pullRequestId:r,iterationId:o},body:e})]})})},t.prototype.deletePullRequestIterationStatus=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",routeValues:{project:i,repositoryId:e,pullRequestId:t,iterationId:r,statusId:o}})]})})},t.prototype.getPullRequestIterationStatus=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",routeValues:{project:i,repositoryId:e,pullRequestId:t,iterationId:r,statusId:o}})]})})},t.prototype.getPullRequestIterationStatuses=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,iterationId:r}})]})})},t.prototype.updatePullRequestIterationStatuses=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/iterations/{iterationId}/statuses/{statusId}",routeValues:{project:i,repositoryId:t,pullRequestId:r,iterationId:o},customHeaders:{"Content-Type":"application/json-patch+json"},body:e})]})})},t.prototype.createPullRequestLabel=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={projectId:i},[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/labels/{labelIdOrName}",routeValues:{project:o,repositoryId:t,pullRequestId:r},queryParams:n,body:e})]})})},t.prototype.deletePullRequestLabels=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={projectId:i},[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/labels/{labelIdOrName}",routeValues:{project:o,repositoryId:e,pullRequestId:t,labelIdOrName:r},queryParams:n})]})})},t.prototype.getPullRequestLabel=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={projectId:i},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/labels/{labelIdOrName}",routeValues:{project:o,repositoryId:e,pullRequestId:t,labelIdOrName:r},queryParams:n})]})})},t.prototype.getPullRequestLabels=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={projectId:o},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/labels/{labelIdOrName}",routeValues:{project:r,repositoryId:e,pullRequestId:t},queryParams:i})]})})},t.prototype.getPullRequestProperties=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/properties",routeValues:{project:r,repositoryId:e,pullRequestId:t}})]})})},t.prototype.updatePullRequestProperties=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/properties",routeValues:{project:o,repositoryId:t,pullRequestId:r},customHeaders:{"Content-Type":"application/json-patch+json"},body:e})]})})},t.prototype.getPullRequestQuery=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/PullRequestQuery",routeValues:{project:r,repositoryId:t},body:e})]})})},t.prototype.createPullRequestReviewer=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0",method:"PUT",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:i,repositoryId:t,pullRequestId:r,reviewerId:o},body:e})]})})},t.prototype.createPullRequestReviewers=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.deletePullRequestReviewer=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,reviewerId:r}})]})})},t.prototype.getPullRequestReviewer=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,reviewerId:r}})]})})},t.prototype.getPullRequestReviewers=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:r,repositoryId:e,pullRequestId:t}})]})})},t.prototype.updatePullRequestReviewers=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/reviewers/{reviewerId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.getPullRequestById=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/pullRequests/{pullRequestId}",routeValues:{project:t,pullRequestId:e}})]})})},t.prototype.getPullRequestsByProject=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={searchCriteria:t,maxCommentLength:r,$skip:o,$top:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/pullRequests",routeValues:{project:e},queryParams:n})]})})},t.prototype.createPullRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={supportsIterations:o},[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}",routeValues:{project:r,repositoryId:t},queryParams:i,body:e})]})})},t.prototype.getPullRequest=function(e,t,r,o,i,n,s,a){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(p){return u={maxCommentLength:o,$skip:i,$top:n,includeCommits:s,includeWorkItemRefs:a},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}",routeValues:{project:r,repositoryId:e,pullRequestId:t},queryParams:u})]})})},t.prototype.getPullRequests=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={searchCriteria:t,maxCommentLength:o,$skip:i,$top:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}",routeValues:{project:r,repositoryId:e},queryParams:s})]})})},t.prototype.updatePullRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.sharePullRequest=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/share",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.createPullRequestStatus=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.deletePullRequestStatus=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,statusId:r}})]})})},t.prototype.getPullRequestStatus=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,statusId:r}})]})})},t.prototype.getPullRequestStatuses=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",routeValues:{project:r,repositoryId:e,pullRequestId:t}})]})})},t.prototype.updatePullRequestStatuses=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/statuses/{statusId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},customHeaders:{"Content-Type":"application/json-patch+json"},body:e})]})})},t.prototype.createComment=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",routeValues:{project:i,repositoryId:t,pullRequestId:r,threadId:o},body:e})]})})},t.prototype.deleteComment=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0",method:"DELETE",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",routeValues:{project:i,repositoryId:e,pullRequestId:t,threadId:r,commentId:o}})]})})},t.prototype.getComment=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",routeValues:{project:i,repositoryId:e,pullRequestId:t,threadId:r,commentId:o}})]})})},t.prototype.getComments=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,threadId:r}})]})})},t.prototype.updateComment=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(s){return[2,this.beginRequest({apiVersion:"5.0",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}/comments/{commentId}",routeValues:{project:n,repositoryId:t,pullRequestId:r,threadId:o,commentId:i},body:e})]})})},t.prototype.createThread=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",routeValues:{project:o,repositoryId:t,pullRequestId:r},body:e})]})})},t.prototype.getPullRequestThread=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={$iteration:i,$baseIteration:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",routeValues:{project:o,repositoryId:e,pullRequestId:t,threadId:r},queryParams:s})]})})},t.prototype.getThreads=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={$iteration:o,$baseIteration:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",routeValues:{project:r,repositoryId:e,pullRequestId:t},queryParams:n})]})})},t.prototype.updateThread=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(n){return[2,this.beginRequest({apiVersion:"5.0",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/threads/{threadId}",routeValues:{project:i,repositoryId:t,pullRequestId:r,threadId:o},body:e})]})})},t.prototype.getPullRequestWorkItemRefs=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pullRequests/{pullRequestId}/workitems",routeValues:{project:r,repositoryId:e,pullRequestId:t}})]})})},t.prototype.createPush=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pushes/{pushId}",routeValues:{project:r,repositoryId:t},body:e})]})})},t.prototype.getPush=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={includeCommits:o,includeRefUpdates:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pushes/{pushId}",routeValues:{project:r,repositoryId:e,pushId:t},queryParams:n})]})})},t.prototype.getPushes=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={$skip:r,$top:o,searchCriteria:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/pushes/{pushId}",routeValues:{project:t,repositoryId:e},queryParams:n})]})})},t.prototype.deleteRepositoryFromRecycleBin=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/recycleBin/repositories/{repositoryId}",routeValues:{project:e,repositoryId:t}})]})})},t.prototype.getRecycleBinRepositories=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/recycleBin/repositories/{repositoryId}",routeValues:{project:e}})]})})},t.prototype.restoreRepositoryFromRecycleBin=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"PATCH",routeTemplate:"{project}/_apis/git/recycleBin/repositories/{repositoryId}",routeValues:{project:t,repositoryId:r},body:e})]})})},t.prototype.getRefs=function(e,t,r,o,i,n,s,a,u){return __awaiter(this,void 0,void 0,function(){var p;return __generator(this,function(c){return p={filter:r,includeLinks:o,includeStatuses:i,includeMyBranches:n,latestStatusesOnly:s,peelTags:a,filterContains:u},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/refs/{*filter}",routeValues:{project:t,repositoryId:e},queryParams:p})]})})},t.prototype.updateRef=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={filter:r,projectId:i},[2,this.beginRequest({apiVersion:"5.0",method:"PATCH",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/refs/{*filter}",routeValues:{project:o,repositoryId:t},queryParams:n,body:e})]})})},t.prototype.updateRefs=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={projectId:o},[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/refs/{*filter}",routeValues:{project:r,repositoryId:t},queryParams:i,body:e})]})})},t.prototype.createFavorite=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/favorites/refs/{favoriteId}",routeValues:{project:t},body:e})]})})},t.prototype.deleteRefFavorite=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"DELETE",routeTemplate:"{project}/_apis/git/favorites/refs/{favoriteId}",routeValues:{project:e,favoriteId:t}})]})})},t.prototype.getRefFavorite=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/favorites/refs/{favoriteId}",routeValues:{project:e,favoriteId:t}})]})})},t.prototype.getRefFavorites=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={repositoryId:t,identityId:r},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/favorites/refs/{favoriteId}",routeValues:{project:e},queryParams:o})]})})},t.prototype.createRepository=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={sourceRef:r},[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/Repositories/{repositoryId}",routeValues:{project:t},queryParams:o,body:e})]})})},t.prototype.deleteRepository=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0",method:"DELETE",routeTemplate:"{project}/_apis/git/Repositories/{repositoryId}",routeValues:{project:t,repositoryId:e}})]})})},t.prototype.getRepositories=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={includeLinks:t,includeAllUrls:r,includeHidden:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/Repositories/{repositoryId}",routeValues:{project:e},queryParams:i})]})})},t.prototype.getRepository=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/Repositories/{repositoryId}",routeValues:{project:t,repositoryId:e}})]})})},t.prototype.getRepositoryWithParent=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={includeParent:t},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/Repositories/{repositoryId}",routeValues:{project:r,repositoryId:e},queryParams:o})]})})},t.prototype.updateRepository=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0",method:"PATCH",routeTemplate:"{project}/_apis/git/Repositories/{repositoryId}",routeValues:{project:r,repositoryId:t},body:e})]})})},t.prototype.createRevert=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/reverts/{revertId}",routeValues:{project:t,repositoryId:r},body:e})]})})},t.prototype.getRevert=function(e,t,r){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(o){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/reverts/{revertId}",routeValues:{project:e,revertId:t,repositoryId:r}})]})})},t.prototype.getRevertForRefName=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={refName:r},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/reverts/{revertId}",routeValues:{project:e,repositoryId:t},queryParams:o})]})})},t.prototype.createCommitStatus=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(i){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/commits/{commitId}/Statuses",routeValues:{project:o,commitId:t,repositoryId:r},body:e})]})})},t.prototype.getStatuses=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={top:o,skip:i,latestOnly:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/commits/{commitId}/Statuses",routeValues:{project:r,commitId:e,repositoryId:t},queryParams:s})]})})},t.prototype.getSuggestions=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/suggestions",routeValues:{project:t,repositoryId:e}})]})})},t.prototype.getTreeDiffs=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s,a=this;return __generator(this,function(u){return s={baseId:r,targetId:o,$top:i,continuationToken:n},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/diffs/trees",routeValues:{project:e,repositoryId:t},queryParams:s,returnRawResponse:!0}).then(function(e){return __awaiter(a,void 0,void 0,function(){var t,r;return __generator(this,function(o){switch(o.label){case 0:return[4,e.text().then(d.deserializeVssJsonObject)];case 1:return t=o.sent(),r=e.headers.get("x-ms-continuationtoken"),[2,{treeDiff:t,continuationToken:r?r.split(","):[]}]}})})})]})})},t.prototype.getTree=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={projectId:o,recursive:i,fileName:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Trees/{sha1}",routeValues:{project:r,repositoryId:e,sha1:t},queryParams:s})]})})},t.prototype.getTreeZip=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={projectId:o,recursive:i,fileName:n},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/Trees/{sha1}",routeValues:{project:r,repositoryId:e,sha1:t},queryParams:s})]})})},t}(c.RestClientBase);t[e].GitClientName="IGitRestClient",t[e].getGitClient=function(r,o){return r.getRestClient(t[e].GitClientName,o)},o.RestClients.add(t[e].GitClientName,{factory:r,options:{serviceInstanceType:"00025394-6065-48ca-87d9-7f5672854ef7"}})}("RestClientGit"),function(e){w=t.UtilsRef={},Object.defineProperty(t,"__esModule",{value:!0});var r="refs/heads/",o="refs/tags/";function i(e){return 0===(e||"").indexOf(r)}function n(e){return 0===(e||"").indexOf(o)}t.UtilsRef.getFriendlyName=function(e){return i(e)?e.substr(r.length):n(e)?e.substr(o.length):e},t.UtilsRef.getRefNameFromBranchName=function(e){return r+e},t.UtilsRef.getRefNameFromTagName=function(e){return o+e},t.UtilsRef.isBranch=i,t.UtilsRef.isTag=n,t.UtilsRef.getVersionFromBranchName=function(e){return"GB"+e},t.UtilsRef.getVersionFromTagName=function(e){return"GT"+e},t.UtilsRef.getVersionFromCommitHash=function(e){return"GC"+e},t.UtilsRef.getShortCommitId=function(e){return e.substring(0,8)}}(),function(e){var r;b=t.GitRefFavoritesService={},Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.artifactType="Microsoft.TeamFoundation.Git.GitRefFavorite",e.artifactScopeType="Repository"}(r=t.GitRefFavoritesService.GitRefFavoriteArtifactConstants||(t.GitRefFavoritesService.GitRefFavoriteArtifactConstants={}));var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dispose=function(){},t}(p.ObservableArray),i=function(){function e(e,t,r){this.gitRestClient=e,this.canFavorites=t,this.projectId=r,this._favoritesCollection=new o([])}return e.prototype.canUseFavorites=function(){return this.canFavorites},e.prototype.canFetchExtendedDetails=function(){return!1},e.prototype.getFavorites=function(e,t,i){return __awaiter(this,void 0,void 0,function(){var s=this;return __generator(this,function(a){if(e!==r.artifactType)throw new Error("Type "+e+" not valid. GitRefFavoritesService only supports "+r.artifactType+".");if(t!==r.artifactScopeType)throw new Error("Scope "+t+" not valid. GitRefFavoritesService only supports "+r.artifactScopeType+".");return this._favoritesPromise||(this._favoritesPromise=this.gitRestClient.getRefFavorites(this.projectId,i)),[2,this._favoritesPromise.then(function(e){return s._favoritesCollection=new o(e.filter(function(e){return 2===e.type}).map(n)),s._favoritesCollection})]})})},e.prototype.getCurrentFolderFavorites=function(){if(!this._favoritesPromise)throw new Error("Favorites not loading yet.");return this._favoritesPromise.then(function(e){return e.filter(function(e){return 1===e.type}).map(function(e){return e.name})})},e.prototype.addFavorite=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){switch(r.label){case 0:return this._favoritesCollection.push(e),[4,this.gitRestClient.createFavorite(s(e),this.projectId)];case 1:return t=r.sent(),e.id=t.id.toString(),[2,e]}})})},e.prototype.removeFavorite=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this._favoritesCollection.removeAll(function(t){return t.id===e.id}),[4,this.gitRestClient.deleteRefFavorite(this.projectId,parseInt(e.id))];case 1:return t.sent(),[2]}})})},e}();function n(e){return{id:e.id.toString(),artifactId:e.name,artifactName:w.getFriendlyName(e.name),artifactScope:{id:e.repositoryId,type:r.artifactScopeType},artifactType:r.artifactType}}function s(e){return{id:e.id&&parseInt(e.id),name:e.artifactId,repositoryId:e.artifactScope.id,type:2}}t.GitRefFavoritesService.GitRefFavoritesService=i}(),function(e){C=t.GitRefService={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,r){var o=this;return"number"==typeof t?o=e.call(this,t)||this:(o=e.apply(this,t)||this).continuationToken=r,o}return __extends(t,e),t}(Array);t.GitRefService.PagedList=r;var i=function(e){function t(){var t,r=e.apply(this,arguments)||this;return r.myBranchesByRepository={},r.branchesByRepository={},r.tagsByRepository={},r.refsByArea=((t={}).heads=r.branchesByRepository,t.tags=r.tagsByRepository,t),r.branchesChangedListeners=[],r.tagsChangedListeners=[],r.searchBranches=function(e,t,o,i){return r.searchPagedRefs(e,t,o,"heads",i)},r.searchTags=function(e,t,o,i){return r.searchPagedRefs(e,t,o,"tags",i)},r}return __extends(t,e),t.prototype.getMyBranches=function(e,t){return this.myBranchesByRepository[e]||(this.myBranchesByRepository[e]=this.getGitClient().getRefs(e,t,void 0,!1,!1,!0).then(s)),this.myBranchesByRepository[e]},t.prototype.getPagedBranches=function(e,t){return this.getPagedRefs(e,t,"heads")},t.prototype.getMoreBranches=function(e,t,r){return this.getMoreRefs(e,t,r,"heads")},t.prototype.getPagedTags=function(e,t){return this.getPagedRefs(e,t,"tags")},t.prototype.getMoreTags=function(e,t,r){return this.getMoreRefs(e,t,r,"tags")},t.prototype.invalidateBranchesCache=function(e){delete this.myBranchesByRepository[e],delete this.branchesByRepository[e];for(var t=0,r=this.branchesChangedListeners;t<r.length;t++){(0,r[t])()}},t.prototype.registerBranchesChangedListener=function(e){this.branchesChangedListeners.push(e)},t.prototype.unregisterBranchesChangedListener=function(e){var t=this.branchesChangedListeners.indexOf(e);t>=0&&this.branchesChangedListeners.slice(t,1)},t.prototype.invalidateTagsCache=function(e){delete this.tagsByRepository[e];for(var t=0,r=this.tagsChangedListeners;t<r.length;t++){(0,r[t])()}},t.prototype.registerTagsChangedListener=function(e){this.tagsChangedListeners.push(e)},t.prototype.unregisterTagsChangedListener=function(e){var t=this.tagsChangedListeners.indexOf(e);t>=0&&this.tagsChangedListeners.slice(t,1)},t.prototype.getPagedRefs=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o,i;return __generator(this,function(n){return(o=this.getCachedRefs(r,e))||(i=this.getRefPaginatedClient(),o=i.getPaginatedRefs(e,t,r,void 0,200),this.cacheRefs(r,e,o)),[2,o]})})},t.prototype.getMoreRefs=function(e,t,o,i){return __awaiter(this,void 0,void 0,function(){var n,s,a,u;return __generator(this,function(p){switch(p.label){case 0:return(n=this.getCachedRefs(i,e))?[4,n]:[2,this.getPagedRefs(e,t,i)];case 1:return(s=p.sent()).continuationToken&&s.continuationToken===o?(a=this.getRefPaginatedClient(),u=a.getPaginatedRefs(e,t,i,void 0,200,s.continuationToken).then(function(e){return new r(s.concat(e),e.continuationToken)}),this.cacheRefs(i,e,u),[2,u]):[2,s]}})})},t.prototype.searchPagedRefs=function(e,t,o,i,n){return __awaiter(this,void 0,void 0,function(){var s,a,u;return __generator(this,function(p){switch(p.label){case 0:return(s=this.getCachedRefs(i,e))?[4,s]:[3,2];case 1:if(!(a=p.sent()).continuationToken)return u=a.filter(function(e){return-1!==e.name.toLowerCase().indexOf(o.toLowerCase())}),[2,new r(u)];p.label=2;case 2:return[2,this.getRefPaginatedClient().getPaginatedRefs(e,t,i,o,200,n)]}})})},t.prototype.getRefPaginatedClient=function(){return this.pageContext.getRestClient("IPaginatedGitRefRestClient")},t.prototype.getGitClient=function(){return this.pageContext.getRestClient("IGitRestClient")},t.prototype.getCachedRefs=function(e,t){return this.refsByArea[e][t]},t.prototype.cacheRefs=function(e,t,r){this.refsByArea[e][t]=r},t}(o.VssService);t.GitRefService.GitRefService=i,o.Services.add("IGitRefService",{serviceFactory:i,options:2});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getPaginatedRefs=function(e,t,o,i,n,s){return __awaiter(this,void 0,void 0,function(){var u,p=this;return __generator(this,function(c){return u={filter:o,filterContains:i,$top:n,continuationToken:s},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/git/repositories/{repositoryId}/refs/{*filter}",routeValues:{project:t,repositoryId:e},queryParams:u,returnRawResponse:!0}).then(function(e){return __awaiter(p,void 0,void 0,function(){var t;return __generator(this,function(o){switch(o.label){case 0:return t=r.bind,[4,e.text().then(d.deserializeVssJsonObject)];case 1:return[2,new(t.apply(r,[void 0,o.sent(),a(e)]))]}})})})]})})},t}(c.RestClientBase);function s(e){return e.filter(function(e){return w.isBranch(e.name)})}function a(e){return e.headers.get("x-ms-continuationtoken")||void 0}t.GitRefService.PaginatedGitRefRestClient=n;o.RestClients.add("IPaginatedGitRefRestClient",{factory:n,options:{serviceInstanceType:"00025394-6065-48ca-87d9-7f5672854ef7"}})}(),function(e){t.GitRepositoryService={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.apply(this,arguments)||this;return t.repositoriesByProject={},t}return __extends(t,e),t.prototype.getAllRepositories=function(e){var t=this.repositoriesByProject[e||""];t||(t=this.pageContext.getRestClient("IGitRestClient").getRepositories(e),this.repositoriesByProject[e||""]=t);return t},t.prototype.getRepositoryById=function(e,t){return this.pageContext.getRestClient("IGitRestClient").getRepository(e,t)},t}(o.VssService);o.Services.add("IGitRepositoryService",{serviceFactory:r})}(),function(e){t.MenuProvider={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.loadItems=function(e){var t=this.pageContext.getService("IVCNavigationService"),r=t.getData();if(r){var o=this.pageContext.getService("ITfsPageService").getData(),i=o&&o.project?o.project.name:"",n=r.defaultRepoIsGit?r.defaultGitRepoName:"$/"+i,s=r.defaultRepoIsGit?"git":"tfvc-repo";e([{key:"vcRepoItem",className:"repo-menu-item",groupKey:"navigation",href:r.defaultRepoIsGit?r.defaultGitRepoUrl:t.getRepositoryUrl(null),name:n,iconProps:{iconName:"",className:"bowtie-icon bowtie-"+s},rank:50}])}},t}(o.VssService);o.Services.add("code-hub-group-menu-provider",{serviceFactory:r})}(),function(e){t.MruRouteService={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){var t=e.apply(this,arguments)||this;return t.id="vc-mru-route-service",t}return __extends(t,e),t.prototype.routeUrl=function(e,t){var r=this.pageContext.getService("IVssLocationService"),o=this.pageContext.getService("IVssContributionService").getData("ms.vss-code-web.versioncontrol-viewmodel-data-provider");return o&&(o.gitRepository?e.vcType="git":o.projectVersionControlInfo&&o.projectVersionControlInfo.supportsTFVC&&(e.vcType="tfvc")),r.routeUrl("ms.vss-code-web.code-redirect",e,t)},t}(o.VssService);o.Services.add("vc-mru-route-service",{serviceFactory:r})}(),function(e){T=t.UtilsSearch={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilsSearch.debouncePromiseFunction=function(e,t,r){var o,i;return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return o&&(clearTimeout(o),i&&i(r),i=void 0,o=void 0),new Promise(function(r){i=r,o=setTimeout(function(){i=void 0,o=void 0,r(e.apply(null,n))},t)})}},t.UtilsSearch.reuseIfStrictlyStronger=function(e,t,r){var o,i;return function(n,s){var a,u,p=function(){return o=n,i=e(n,s)};return a=n,u=o,Boolean(a&&u&&a.toLowerCase().indexOf(u.toLowerCase())>=0)?i.then(function(e){return e&&r(e)?t(n,e):p()}).catch(p):p()}},t.UtilsSearch.createValidator=function(e,t){var r=this;return function(o,i){return __awaiter(r,void 0,void 0,function(){return __generator(this,function(r){switch(r.label){case 0:return[4,t(o)];case 1:return r.sent(),[4,e(o,i)];case 2:return[2,r.sent()]}})})}},t.UtilsSearch.composeSearchByPivot=function(e,t){return function(r,o,i){return e[o||t](r,i)}}}(),function(e){V=t.UtilsTelemetry={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilsTelemetry.startTelemetryTimer=function(e,t){var r=Date.now();return{publishTime:function(o,i){e.getService("IVssTelemetryService").publishEvent(I.VersionControlArea,t,Object.assign({action:o,elapsedMs:Date.now()-r},i))}}}}(),function(e){P=t.ProvidersVersionDropdownProvider={},Object.defineProperty(t,"__esModule",{value:!0});var r=4,o=10,i=/^[0-9a-f]+$/i,n="VersionDropdownProvider",s=function(e){function t(t,r){var i,s=e.call(this)||this;s.pageContext=t,s.options=r,s._continuationTokens={},s.minItemsForSearchBox=0,s.selectExactMatchOnEnter=!0,s.getPickListItems=function(e){return __awaiter(s,void 0,void 0,function(){var t,r,o,i,s,p,c=this;return __generator(this,function(d){switch(d.label){case 0:return e?(t=V.startTelemetryTimer(this.pageContext,n),[4,this.getRefs(e)]):[2,[]];case 1:return r=d.sent(),this._continuationTokens[e]=r.continuationToken,r.continuationToken||(o=this.getGroupsLoadingState())[e]&&(o[e]=!1,this._artifactPickerOptions.groups=a(this.options,o)),this.options.viewMyBranches?[4,this._gitRefFavoritesService.getCurrentFolderFavorites()]:[3,3];case 2:return s=d.sent(),[3,4];case 3:s=[],d.label=4;case 4:return i=s,p=r.map(function(e){return u(e,c.options.repository,c.options.currentIdentityId,i)}),this.selectedItem&&"commit"===this.selectedItem.kind&&p.push(this.selectedItem),t.publishTime("getPickListItems",{groupKey:e,count:p.length,hasMore:Boolean(r.continuationToken)}),[2,p]}})})},s.searchCommits=function(e){return __awaiter(s,void 0,void 0,function(){var t,r,i,s,a,u,p,d=this;return __generator(this,function(l){switch(l.label){case 0:return t=V.startTelemetryTimer(this.pageContext,n),r=this.pageContext.getRestClient("IGitRestClient"),i=this.options.repository,s=i.id,a=i.project.id,[4,r.getCommitsBatch({fromCommitId:c(e,"0",40),toCommitId:c(e,"F",40)},s,a,0,o+1)];case 1:return u=l.sent(),p=u.map(function(e){return function(e,t){return{refName:e.commitId,friendlyName:w.getShortCommitId(e.commitId)+" "+e.comment,versionString:w.getVersionFromCommitHash(e.commitId),kind:"commit",repositoryId:t.id}}(e,d.options.repository)}),t.publishTime("searchCommits",{count:p.length}),[2,p]}})})},s.searchBranchRefs=function(e,t){return s.searchRefs(e,t,"all-branches",s.getGitRefService().searchBranches)},s.searchTagRefs=function(e,t){return s.searchRefs(e,t,"all-tags",s.getGitRefService().searchTags)};var p,l={artifactType:b.GitRefFavoriteArtifactConstants.artifactType,artifactScope:{id:r.repository.id,name:r.repository.name,type:b.GitRefFavoriteArtifactConstants.artifactScopeType}},m={branch:"tfvc-branch",tag:"tag",commit:"tfvc-commit"},g=function(e){var t=e.onCreateBranchClick,r=e.viewTagsPivot,o=e.viewCommitsPivot;return[{id:"branches",name:R.VersionDropdown_PivotBranches,getActions:function(){return function(e){if(!e)return[];return[{name:R.VersionDropdown_NewBranch,iconProps:{iconName:"Add"},onClick:function(){return e()}}]}(t)},searchTextPlaceholder:R.VersionDropdown_BranchesSearchTextPlaceholder,searchNoResultsText:R.VersionDropdown_BranchesSearchNoResultsText},r&&{id:"tags",name:R.VersionDropdown_PivotTags,searchTextPlaceholder:R.VersionDropdown_TagsSearchTextPlaceholder,searchNoResultsText:R.VersionDropdown_TagsSearchNoResultsText,noItemsText:R.VersionDropdown_TagsNoItemsText},o&&{id:"commits",name:R.VersionDropdown_PivotCommits,searchTextPlaceholder:R.VersionDropdown_CommitsSearchTextPlaceholder,searchNoResultsText:R.VersionDropdown_CommitsSearchNoResultsText,noItemsText:R.VersionDropdown_CommitsSearchMinimumCharactersError}].filter(Boolean)}(r);if(g&&1===g.length){var y=g[0].getActions;p=y&&y([]),g=void 0}var _=r.repository.project.id;return s._gitRefFavoritesService=s.getGitRefFavoritesService(_,r.viewMyBranches),s._artifactPickerOptions={pageContext:t,favoritesContext:l,favoritesService:s._gitRefFavoritesService,onArtifactClicked:function(e){return r.onVersionSelected&&r.onVersionSelected(e.versionString)},selectedArtifact:d(r.selectedVersionString,r.repository),hideFavoriteSelectedItemIndicator:!0,getArtifacts:s.getPickListItems,getArtifactId:function(e){return e.refName},getArtifactName:function(e){return e.friendlyName},getArtifactIcon:function(e){return{iconType:1,iconName:m[e.kind]}},getFavoriteFromArtifact:h,getArtifactListGroupId:f,artifactComparer:v,groups:a(r,(i={},i["all-branches"]=!0,i["all-tags"]=!0,i)),pivots:g,otherActions:p,limitSearchToPivot:!0,getSearchResults:s.createSearchFunction(),getSearchResultsContinuationToken:function(e){return e.continuationToken},onFilterItemByText:q},s.initialize(s._artifactPickerOptions),s.getGitRefService().registerBranchesChangedListener(s.forgetCachedArtifacts),s}return __extends(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this),this.getGitRefService().unregisterBranchesChangedListener(this.forgetCachedArtifacts)},t.prototype.getRefs=function(e){var t=this._continuationTokens[e],r=this.options.repository,o=r.id,i=r.project.id;return t?"all-tags"===e?this.getGitRefService().getMoreTags(o,i,t):this.getGitRefService().getMoreBranches(o,i,t):"all-tags"===e?this.getGitRefService().getPagedTags(o,i):this.options.viewMyBranches?this.getMyBranches():this.getGitRefService().getPagedBranches(o,i)},t.prototype.getMyBranches=function(){var e=this.options.repository,t=e.id,r=e.project.id;return this.getGitRefService().getMyBranches(t,r).then(function(e){return new C.PagedList(e,"!")})},t.prototype.getGitRefFavoritesService=function(e,t){var r=this.pageContext.getService("IFavoritesService"),o=this.pageContext.getRestClient("IGitRestClient");return new b.GitRefFavoritesService(o,t&&r.canUseFavorites(),e)},t.prototype.getGitRefService=function(){return this.pageContext.getService("IGitRefService")},t.prototype.createSearchFunction=function(){var e,t,r=this,o=function(e){return T.debouncePromiseFunction(e,1e3,[])},i=function(e){return function(t,r){return e(t&&t.trim(),r)}},n=function(e){return T.reuseIfStrictlyStronger(e,y,I)};return T.composeSearchByPivot(((e={}).branches=(t=i(n(o(this.searchBranchRefs))),function(e,o){return r.isGroupFullyLoaded("all-branches")?Promise.resolve(void 0):t(e,o)}),e.tags=function(e){return function(t,o){return r.isGroupFullyLoaded("all-tags")?Promise.resolve(void 0):e(t,o)}}(i(n(o(this.searchTagRefs)))),e.commits=i(function(e){return T.createValidator(e,m)}(function(e){return T.reuseIfStrictlyStronger(e,g,_)}(o(this.searchCommits)))),e),"branches")},t.prototype.searchRefs=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i,s,a,p,c,d,l=this;return __generator(this,function(h){switch(h.label){case 0:return i=V.startTelemetryTimer(this.pageContext,n),t||(t=this._continuationTokens[r]),s=this.options.repository,a=s.id,p=s.project.id,[4,o(a,p,e,t)];case 1:return c=h.sent(),d=c.map(function(e){return u(e,l.options.repository,l.options.currentIdentityId,[])}),i.publishTime("searchRefs",{count:d.length,hasMore:Boolean(c.continuationToken)}),[2,new C.PagedList(d,c.continuationToken)]}})})},t.prototype.getGroupsLoadingState=function(){return this._artifactPickerOptions&&this._artifactPickerOptions.groups?this._artifactPickerOptions.groups.reduce(function(e,t){var r;return Object.assign({},e,((r={})[t.key]=t.isLoading,r))},{}):{}},t.prototype.isGroupFullyLoaded=function(e){return!this.getGroupsLoadingState()[e]},t}(l.ArtifactPickerProviderBase);function a(e,t){var r=e.viewMyBranches,o=e.viewTagsPivot,i=e.viewCommitsPivot;return[{key:"default",name:void 0,pivotId:"branches"},r&&{key:"favorites",name:R.VersionDropdown_MineBranches,pivotId:"branches"},{key:"all-branches",name:R.VersionDropdown_AllBranches,pivotId:"branches",isLoading:t["all-branches"]},o&&{key:"all-tags",name:void 0,pivotId:"tags",isLoading:t["all-tags"]},i&&{key:"found-commits",name:void 0,pivotId:"commits"}].filter(Boolean)}function u(e,t,r,o){var i=w.getFriendlyName(e.name),n=w.isTag(e.name);return{refName:e.name,friendlyName:i,versionString:n?w.getVersionFromTagName(i):w.getVersionFromBranchName(i),kind:n?"tag":"branch",isMine:e.creator&&e.creator.id===r,isDefault:e.name===t.defaultBranch,isFavoritedByFolder:!n&&p(e.name,o),repositoryId:t.id}}function p(e,t){return t.some(function(t){return e.startsWith(t+"/")})}function c(e,t,r){return!e||e.length>=r?e:e+Array(r-e.length+1).join(t)}function d(e,t){if(e){var r="GT"===e.substring(0,2),o="GC"===e.substring(0,2),i=e.substring(2);o&&(i=w.getShortCommitId(i));var n=w.getFriendlyName(t.defaultBranch);return{refName:r?w.getRefNameFromTagName(i):w.getRefNameFromBranchName(i),friendlyName:i,versionString:e,kind:o?"commit":r?"tag":"branch",isDefault:i===n,repositoryId:t.id}}}function h(e){if("branch"===e.kind&&!e.isDefault&&!e.isMine)return{artifactId:e.refName,artifactName:e.friendlyName,artifactScope:{id:e.repositoryId,type:b.GitRefFavoriteArtifactConstants.artifactScopeType},artifactType:b.GitRefFavoriteArtifactConstants.artifactType}}function f(e){return"commit"===e.kind?"found-commits":"tag"===e.kind?"all-tags":e.isDefault?"default":e.isMine||e.isFavoritedByFolder?"favorites":"all-branches"}function v(e,t){return e.friendlyName.localeCompare(t.friendlyName)}function m(e){if(!e||e.length<r)throw new Error(R.VersionDropdown_CommitsSearchMinimumCharactersError);if(!i.test(e))throw new Error(R.VersionDropdown_CommitsSearchWrongCharactersError)}function g(e,t){return t.filter(function(t){return t.refName.startsWith(e)})}function y(e,t){return t.filter(function(t){return-1!==t.friendlyName.toLowerCase().indexOf(e.toLowerCase())})}function _(e){return e.length<=o}function I(e){return!e.continuationToken}function q(e,t,r){return-1!==("commit"===r.kind?r.refName:t.name).toLowerCase().indexOf(e.toLowerCase())}t.ProvidersVersionDropdownProvider.VersionDropdownProvider=s}(),function(e){j=t.RepositoryPickerProvider={},Object.defineProperty(t,"__esModule",{value:!0});var o="Microsoft.TeamFoundation.Git.Repository",i="RepositoryPickerProvider",s=function(e){function t(t,s){var p=e.call(this)||this;p.minItemsForSearchBox=0,p.getPickListItems=function(){if(!p.itemsPromise){var e=V.startTelemetryTimer(p.pageContext,i),t=p.pageContext.getService("IGitRepositoryService");p.itemsPromise=t.getAllRepositories(p.projectId).then(function(t){var r=t.map(u);return r.sort(function(e,t){return n.localeIgnoreCaseComparer(e.name,t.name)}),p.supportsTfvc&&r.unshift({name:"$/"+p.projectName,isTfvc:!0,id:"tfvc",isFork:!1}),e.publishTime("getAllRepositories"),r})}return p.itemsPromise},p.onSelectedItemChanged=function(e){p.setSelectedItem(e);var t=p.artifactPickerOptions,o=t.onArtifactClicked,n=t.getArtifactHref;return o?o(e):n&&r.isFeatureEnabled(p.pageContext,"ms.vss-tfs-web.vertical-navigation",!1)?a.onClickFPS(p.pageContext,n(e),!0,void 0,{telemetrySource:i}):void 0};var c,d,l=s.actions,h=s.getItemHref,f=s.getRepositories,v=s.onRepositorySelected,m=s.selectedRepositoryIsTfvc,g=s.selectedRepositoryIsFork,y=s.selectedRepositoryId,_=s.selectedRepositoryName,I=s.supportsTfvc,q=s.projectName,w=s.projectId,b=s.defaultGroupHeader,C=s.favoriteGroupHeader,T=s.showFavoritesEarly,P=void 0===T||T;return p.pageContext=t,p.projectId=w,p.projectName=q,p.supportsTfvc=I,f&&(p.itemsPromise=f().then(function(e){return e.map(u)})),m?c={name:"$/"+q,isTfvc:!0,id:"tfvc",isFork:!1}:_&&(c={name:_,isTfvc:!1,id:y||_,isFork:!!g}),d=q&&w?{artifactType:o,artifactScope:{id:w,name:q,type:"Project"}}:{artifactType:o,artifactScope:{id:"",name:"",type:"Collection"}},p.artifactPickerOptions={pageContext:t,favoritesContext:d,onArtifactClicked:v,selectedArtifact:c,defaultGroupHeader:b,favoriteGroupHeader:C,hideFavoriteSelectedItemIndicator:!0,getArtifacts:p.getPickListItems,getArtifactId:function(e){return e.id},getArtifactName:function(e){return e.name},getArtifactHref:h,getArtifactIcon:function(e){return{iconType:1,iconName:e.isTfvc?"tfvc-repo":e.isFork?"git-fork":"git"}},getArtifactFromFavorite:P?function(e){return{name:e.artifactName,id:e.artifactId,isTfvc:!1,isFork:!1}}:void 0,getFavoriteFromArtifact:function(e){return e.repository?{artifactId:e.repository.id,artifactName:e.repository.name,artifactScope:{id:e.repository.project.id,name:e.repository.project.name,type:"Project"},artifactType:o}:void 0},artifactComparer:function(e,t){return e.name.localeCompare(t.name)},otherActions:l,searchTextPlaceholder:R.SearchRepositoriesWatermark},p.initialize(p.artifactPickerOptions),p}return __extends(t,e),t.prototype._loadFavorites=function(t){return void 0===t&&(t=!1),__awaiter(this,void 0,void 0,function(){var r,o;return __generator(this,function(n){switch(n.label){case 0:return r=V.startTelemetryTimer(this.pageContext,i),[4,e.prototype._loadFavorites.call(this,t)];case 1:return(o=n.sent())&&r.publishTime("loadFavorites",{includeExtendedData:t}),[2,o]}})})},t}(l.ArtifactPickerProviderBase);function u(e){return{name:e.name,id:e.id,repository:e,isFork:e.isFork,isTfvc:!1}}t.RepositoryPickerProvider.RepositoryPickerProvider=s}(),function(e){t[e]={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.getBranch=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={path:e,includeParent:r,includeChildren:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Branches/{*path}",routeValues:{project:t},queryParams:i})]})})},t.prototype.getBranches=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={includeParent:t,includeChildren:r,includeDeleted:o,includeLinks:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Branches/{*path}",routeValues:{project:e},queryParams:n})]})})},t.prototype.getBranchRefs=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={scopePath:e,includeDeleted:r,includeLinks:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Branches/{*path}",routeValues:{project:t},queryParams:i})]})})},t.prototype.getChangesetChanges=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={$skip:t,$top:r},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/changesets/{id}/changes",routeValues:{id:e},queryParams:o})]})})},t.prototype.createChangeset=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/tfvc/changesets/{id}",routeValues:{project:t},body:e})]})})},t.prototype.getChangeset=function(e,t,r,o,i,n,s,a,u,p,c){return __awaiter(this,void 0,void 0,function(){var d;return __generator(this,function(l){return d={maxChangeCount:r,includeDetails:o,includeWorkItems:i,maxCommentLength:n,includeSourceRename:s,$skip:a,$top:u,$orderby:p,searchCriteria:c},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/changesets/{id}",routeValues:{project:t,id:e},queryParams:d})]})})},t.prototype.getChangesets=function(e,t,r,o,i,n){return __awaiter(this,void 0,void 0,function(){var s;return __generator(this,function(a){return s={maxCommentLength:t,$skip:r,$top:o,$orderby:i,searchCriteria:n},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/changesets/{id}",routeValues:{project:e},queryParams:s})]})})},t.prototype.getBatchedChangesets=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"_apis/tfvc/ChangesetsBatch",body:e})]})})},t.prototype.getChangesetWorkItems=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/changesets/{id}/workItems",routeValues:{id:e}})]})})},t.prototype.getItemsBatch=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",routeTemplate:"{project}/_apis/tfvc/ItemBatch",routeValues:{project:t},body:e})]})})},t.prototype.getItemsBatchZip=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(r){return[2,this.beginRequest({apiVersion:"5.0",method:"POST",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/tfvc/ItemBatch",routeValues:{project:t},body:e})]})})},t.prototype.getItem=function(e,t,r,o,i,n,s,a){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(p){return u={path:e,fileName:r,download:o,scopePath:i,recursionLevel:n,versionDescriptor:s,includeContent:a},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Items/{*path}",routeValues:{project:t},queryParams:u})]})})},t.prototype.getItemContent=function(e,t,r,o,i,n,s,a){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(p){return u={path:e,fileName:r,download:o,scopePath:i,recursionLevel:n,versionDescriptor:s,includeContent:a},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/octet-stream",routeTemplate:"{project}/_apis/tfvc/Items/{*path}",routeValues:{project:t},queryParams:u})]})})},t.prototype.getItems=function(e,t,r,o,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(s){return n={scopePath:t,recursionLevel:r,includeLinks:o,versionDescriptor:i},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Items/{*path}",routeValues:{project:e},queryParams:n})]})})},t.prototype.getItemText=function(e,t,r,o,i,n,s,a){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(p){return u={path:e,fileName:r,download:o,scopePath:i,recursionLevel:n,versionDescriptor:s,includeContent:a},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"text/plain",routeTemplate:"{project}/_apis/tfvc/Items/{*path}",routeValues:{project:t},queryParams:u})]})})},t.prototype.getItemZip=function(e,t,r,o,i,n,s,a){return __awaiter(this,void 0,void 0,function(){var u;return __generator(this,function(p){return u={path:e,fileName:r,download:o,scopePath:i,recursionLevel:n,versionDescriptor:s,includeContent:a},[2,this.beginRequest({apiVersion:"5.0",httpResponseType:"application/zip",routeTemplate:"{project}/_apis/tfvc/Items/{*path}",routeValues:{project:t},queryParams:u})]})})},t.prototype.getLabelItems=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={$top:t,$skip:r},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/labels/{labelId}/items",routeValues:{labelId:e},queryParams:o})]})})},t.prototype.getLabel=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={requestData:t},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Labels/{labelId}",routeValues:{project:r,labelId:e},queryParams:o})]})})},t.prototype.getLabels=function(e,t,r,o){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){return i={requestData:e,$top:r,$skip:o},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"{project}/_apis/tfvc/Labels/{labelId}",routeValues:{project:t},queryParams:i})]})})},t.prototype.getShelvesetChanges=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={shelvesetId:e,$top:t,$skip:r},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/shelvesets/changes",queryParams:o})]})})},t.prototype.getShelveset=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(o){return r={shelvesetId:e,requestData:t},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/shelvesets",queryParams:r})]})})},t.prototype.getShelvesets=function(e,t,r){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(i){return o={requestData:e,$top:t,$skip:r},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/shelvesets",queryParams:o})]})})},t.prototype.getShelvesetWorkItems=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(r){return t={shelvesetId:e},[2,this.beginRequest({apiVersion:"5.0",routeTemplate:"_apis/tfvc/shelvesets/workitems",queryParams:t})]})})},t.prototype.getTfvcStatistics=function(e,t){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(o){return r={scopePath:t},[2,this.beginRequest({apiVersion:"5.0-preview.1",routeTemplate:"{project}/_apis/tfvc/stats",routeValues:{project:e},queryParams:r})]})})},t}(c.RestClientBase);t[e].TfvcClientName="ITfvcRestClient",t[e].getTfvcClient=function(r,o){return r.getRestClient(t[e].TfvcClientName,o)},o.RestClients.add(t[e].TfvcClientName,{factory:r,options:{serviceInstanceType:"00025394-6065-48ca-87d9-7f5672854ef7"}})}("RestClientTfvc"),function(e){t.UtilsDate={},Object.defineProperty(t,"__esModule",{value:!0}),t.UtilsDate.isDateRecent=function(e){if(!e)return!1;var t=new Date;return Math.abs(t.getTime()-e.getTime())/36e5<24},t.UtilsDate.getDateString=function(e,t,r){return void 0===r&&(r=!1),e?t?h.ago(e):r?e.toLocaleDateString():e.toLocaleString():""}}(),function(e){S=t.ComponentsRepositoryDropdown={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.itemPicker=s.createRef(),o.pickerProvider=new j.RepositoryPickerProvider(r.pageContext,t.providerOptions),o}return __extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,r=e.tabIndex,o=e.hideSelectedItemIcon,i=e.dropdownIconProps,n=e.isOpen,a=e.onToggleDropdown,u=e.ariaDescribedBy,p=e.onFocus,c=e.onFocusLost;return s.createElement(m.ItemPickerDropdown,{ref:this.itemPicker,id:this.props.id,provider:this.pickerProvider,className:f.css("repository-selector",t),tabIndex:r,pickListClassName:"repository-selector-dropdown",hideSelectedItemIcon:o,dropdownIconProps:i,ariaDescribedBy:u,isOpen:n,onToggleDropdown:a,onFocus:p,onFocusLost:c})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.props.componentRef&&this.props.componentRef(this)},t.prototype.componentWillReceiveProps=function(e){e.providerOptions!==this.props.providerOptions&&(this.pickerProvider=new j.RepositoryPickerProvider(this.context.pageContext,e.providerOptions))},t.prototype.focus=function(){this.itemPicker.current&&this.itemPicker.current.focus()},t}(v.VssComponent);t.ComponentsRepositoryDropdown.RepositoryDropdownComponent=r}(),function(e){t.ComponentsCommandBarRepositorySelector={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.repositoryDropdown=s.createRef(),o.expand=function(e,t,r){o.props.expand&&o.props.expand(e,t,r)},o.onToggleDropdown=function(e){o.props.expand&&o.props.itemKey&&o.props.expand(o.props.itemKey,e)},o.getActions=function(){var e=[];if(o.canCreateRepositories&&(e.push({name:R.NewRepository,iconProps:{iconName:"Add"},onClick:function(){o.context.pageContext.getService("IVssLayoutManager").renderCallout(function(e){return s.createElement(u.LegacyComponent,{modules:["VersionControl/Scripts/Components/HeaderComponents/HeaderComponents"],wrappedType:"newRepositoryDialog",onClose:function(){e()},isOverviewHubEnabled:q.FeatureFlags.isRepositoryOverviewHubEnabled(o.context.pageContext)},null)})}}),e.push({name:R.ImportRepository,iconProps:{iconName:"Upload"},onClick:function(){o.context.pageContext.getService("IVssLayoutManager").renderCallout(function(e){return s.createElement(u.LegacyComponent,{modules:["VersionControl/Scripts/Components/HeaderComponents/HeaderComponents"],wrappedType:"importRepositoryDialog",onClose:function(){e()}},null)})}})),o.canManageRepositories){var t=i.routeUrl(o.context.pageContext,"ms.vss-code-web.admin-version-control-route",{project:o.projectName});e.push({name:R.ManageRepositories,iconProps:{iconName:"Settings"},href:t})}return e},o.getItemHref=function(e){return o.context.pageContext.getService("IVCNavigationService").getRepositoryUrl(e.isTfvc?null:e.name)},o.initializeData(t,r),o.state={selected:!1},o}return __extends(t,e),t.prototype.render=function(){return this.vcData&&this.projectName?s.createElement(g.CommandBarExpandableComponent,Object.assign({},this.props,{calloutId:this.props.expanded?"dropdown"+this.componentId:void 0,className:v.css("commandbar-item-menu",this.props.className),expandOnHover:!1,id:"cmec"+this.componentId,noTabIndex:!0,expand:this.expand}),s.createElement(S.RepositoryDropdownComponent,{ref:this.repositoryDropdown,className:"command-bar-repository-selector",id:"dropdown"+this.componentId,tabIndex:this.props.selected?0:-1,onFocus:this.props.onFocus,onFocusLost:this.props.onFocusLost,hideSelectedItemIcon:this.props.hideIcon,dropdownIconProps:this.props.useSmallDropdownIcon?{iconName:"ChevronDownSmall"}:void 0,providerOptions:{actions:this.getActions(),getItemHref:this.getItemHref,projectName:this.projectName,projectId:this.projectId,selectedRepositoryId:this.vcData.defaultRepoId||"tfvc",selectedRepositoryName:this.vcData.defaultGitRepoName,selectedRepositoryIsTfvc:!this.vcData.defaultRepoIsGit,selectedRepositoryIsFork:this.vcData.defaultRepoIsFork,supportsTfvc:this.vcData.supportsTfvc},isOpen:this.props.expanded,onToggleDropdown:this.onToggleDropdown})):null},t.prototype.componentDidUpdate=function(e){!e.selected&&this.props.selected&&this.repositoryDropdown.current&&this.repositoryDropdown.current.focus()},t.prototype.initializeData=function(e,t){var r=t.pageContext.getService("IVCNavigationService");this.vcData=r.getData();var o=t.pageContext.getService("ITfsPageService").getData();if(o&&o.project){this.projectName=o.project.name,this.projectId=o.project.id;var i=t.pageContext.getService("IVssSecurityService"),n="repoV2/"+this.projectId+"/";this.canCreateRepositories=i.hasPermission(I.GitConstants.GitSecurityNamespaceId,n,256),this.canManageRepositories=i.hasPermission(I.GitConstants.GitSecurityNamespaceId,n,1024)||i.hasPermission(I.GitConstants.GitSecurityNamespaceId,n,512)||i.hasPermission(I.GitConstants.GitSecurityNamespaceId,n,8192),this.favoritesContext={artifactType:"Microsoft.TeamFoundation.Git.Repository",artifactScope:{id:o.project.id,name:o.project.name,type:"Project"}}}else this.projectName=void 0,this.projectId=void 0,this.favoritesContext=void 0},t.prototype.hasFocus=function(e){return!1},t}(v.VssComponent);v.Components.add("navigation-repository-selector",r)}(),function(e){t.ComponentsHeaderComponents={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return s.createElement(g.CommandBarChildComponent,Object.assign({},this.props,{noTabIndex:!0}),s.createElement(u.LegacyComponent,{key:this.props.wrappedComponentType,wrappedType:this.props.wrappedComponentType,modules:["VersionControl/Scripts/Components/HeaderComponents/HeaderComponents"],selected:this.props.selected}))},t}(v.VssComponent);r.componentType="versionControlActionHeader",v.VssComponent.register(r.componentType,r)}(),function(e){t.ComponentsRepositoryList={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.pickerProvider=new j.RepositoryPickerProvider(r.pageContext,t.providerOptions),o}return __extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className;e.useDropdownStyle;return s.createElement(m.ItemPickList,{provider:this.pickerProvider,className:f.css("repository-list",t)})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.props.componentRef&&this.props.componentRef(this)},t.prototype.componentWillReceiveProps=function(e){e.providerOptions!==this.props.providerOptions&&(this.pickerProvider=new j.RepositoryPickerProvider(this.context.pageContext,e.providerOptions))},t}(v.VssComponent);t.ComponentsRepositoryList.RepositoryListComponent=r}(),function(e){k=t.ComponentsVersionDropdown={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.provider=new P.VersionDropdownProvider(r.pageContext,t.providerOptions),o}return __extends(t,e),t.prototype.render=function(){var e=this.props,t=e.className,r=e.tabIndex,i=e.hideSelectedItemIcon,n=e.dropdownIconProps,a=e.isOpen,u=e.autoFocus,p=e.isDrodownFullWidth,c=e.placeholderText,d=e.onToggleDropdown;return s.createElement(m.ItemPickerDropdown,{provider:this.provider,className:f.css("version-selector",t),tabIndex:r,pickListClassName:"version-selector-dropdown",hideSelectedItemIcon:i,dropdownIconProps:n,pickListWidth:p?void 0:350,isOpen:a,autoFocus:u,placeholderText:c,onRenderItemText:o,onToggleDropdown:d})},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.props.componentRef&&this.props.componentRef(this)},t.prototype.componentWillReceiveProps=function(e){y.shallowCompare(e.providerOptions,this.props.providerOptions)||(this.provider=new P.VersionDropdownProvider(this.context.pageContext,e.providerOptions))},t}(v.VssComponent);function o(e,t){var r,o,i="commit"===t.kind?{lastName:e.name}:(r=e.name,(o=r.lastIndexOf("/"))>0?{prefix:r.substring(0,o+1),lastName:r.substring(o+1)}:{lastName:r}),n=i.prefix,a=i.lastName;return s.createElement("span",null,n&&s.createElement("span",{className:"prefix-name"},n),a,t.isDefault&&s.createElement("span",{className:"default-badge"},R.VersionDropdown_DefaultBadge))}t.ComponentsVersionDropdown.VersionDropdown=r}(),function(e){t.ComponentsVersionDropdownAsync={},Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,r){var o=e.call(this,t,r)||this;return o.state={},o}return __extends(t,e),t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this),this.state.gitRepository||this._fetchGitRepository()},t.prototype.render=function(){var e=Object.assign({},this.props.versionDropdownProps.providerOptions,{repository:this.state.gitRepository||{}}),t=Object.assign({},this.props.versionDropdownProps,{providerOptions:e});return s.createElement(s.Fragment,null,this.state.gitRepository?s.createElement(k.VersionDropdown,Object.assign({},t)):s.createElement(_.Spinner,null))},t.prototype._fetchGitRepository=function(){var e=this;this.context.pageContext.getService("IGitRepositoryService").getRepositoryById(this.props.repositoryId,this.props.projectId).then(function(t){e.setState({gitRepository:t})})},t}(v.VssComponent);t.ComponentsVersionDropdownAsync.VersionDropdownAsync=r,v.Components.add("version-dropdown-async",r)}()},["Resources","Contracts/Constants","Contracts/EnumToString","Helpers","Navigation","CreateMenuProvider","Flux/Action","Flux/Store","RestClient/Git","Utils/Ref","GitRefFavoritesService","GitRefService","GitRepositoryService","MenuProvider","MruRouteService","Utils/Search","Utils/Telemetry","Providers/VersionDropdownProvider","RepositoryPickerProvider","RestClient/Tfvc","Utils/Date","Components/RepositoryDropdown","Components/CommandBarRepositorySelector","Components/HeaderComponents","Components/RepositoryList","Components/VersionDropdown","Components/VersionDropdownAsync"]),document.dispatchEvent(new CustomEvent("scriptLoaded",{cancelable:!1,detail:{id:"ms.vss-code-web.common-content"}}));